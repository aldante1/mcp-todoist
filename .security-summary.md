# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Railway Deployment - –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

## ‚úÖ –ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ

### 1. .env —Ñ–∞–π–ª—ã
- ‚úÖ `.env` —É–∂–µ –≤ `.gitignore` (—Å—Ç—Ä–æ–∫–∞ 8)
- ‚úÖ –°–æ–∑–¥–∞–Ω `.env.example` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ –ù–∏–∫–∞–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### 2. HTTP Endpoints
- ‚úÖ `/sse` - —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- ‚úÖ `/message` - —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- ‚ùå `/health` - –ø—É–±–ª–∏—á–Ω—ã–π (–¥–ª—è Railway –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
- ‚ùå `/` - –ø—É–±–ª–∏—á–Ω—ã–π (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ)

### 3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –¢–∏–ø: Bearer Token
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `Authorization: Bearer YOUR_MCP_AUTH_TOKEN`
- –§–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞: Base64, 32+ –±–∞–π—Ç —ç–Ω—Ç—Ä–æ–ø–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç—Ä–æ–≥–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Å `process.env.MCP_AUTH_TOKEN`

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Railway

### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: openssl (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
openssl rand -base64 32

# –í–∞—Ä–∏–∞–Ω—Ç 2: Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# –í–∞—Ä–∏–∞–Ω—Ç 3: Python
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway.app
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```
   TODOIST_API_TOKEN=your_todoist_token
   MCP_AUTH_TOKEN=generated_secure_token
   ```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

```bash
# –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ MCP –∫–ª–∏–µ–Ω—Ç–∞
curl -H "Authorization: Bearer YOUR_MCP_AUTH_TOKEN" \
     https://your-app.railway.app/sse
```

## ‚ö†Ô∏è –ß—Ç–æ –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å

‚ùå –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –∫–æ–¥
‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã)
‚ùå –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ URL query parameters
‚ùå –ù–µ —à–∞—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö

## ‚úÖ Best Practices

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã
   - –ú–∏–Ω–∏–º—É–º 32 –±–∞–π—Ç–∞ —ç–Ω—Ç—Ä–æ–ø–∏–∏
   - Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

2. **–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤**
   - –¢–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ù–∏–∫–æ–≥–¥–∞ –≤ –∫–æ–¥–µ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥–∞—Ö
   - Railway Variables –¥–ª—è production
   - `.env` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

3. **–ü–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤**
   - –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTP –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization`
   - –§–æ—Ä–º–∞—Ç: `Bearer TOKEN` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `TOKEN`
   - –í—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ HTTPS –≤ production

4. **–†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤**
   - –ú–µ–Ω—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏
   - –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
   - –í Railway Variables - –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç —É–≥—Ä–æ–∑

| –£–≥—Ä–æ–∑–∞ | –ó–∞—â–∏—Ç–∞ |
|--------|--------|
| –ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø | Bearer token required |
| –ü–µ—Ä–µ—Ö–≤–∞—Ç —Ç–æ–∫–µ–Ω–æ–≤ | HTTPS (Railway default) |
| –ë—Ä—É—Ç—Ñ–æ—Ä—Å | 32+ –±–∞–π—Ç —ç–Ω—Ç—Ä–æ–ø–∏–∏ |
| –£—Ç–µ—á–∫–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π | .gitignore + env vars only |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ | –ù–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã |

## üìù –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä
cp .env.example .env

# 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω
echo "MCP_AUTH_TOKEN=$(openssl rand -base64 32)" >> .env

# 3. –î–æ–±–∞–≤—å—Ç–µ Todoist —Ç–æ–∫–µ–Ω
echo "TODOIST_API_TOKEN=your_token" >> .env

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm start

# 5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
curl -H "Authorization: Bearer $(grep MCP_AUTH_TOKEN .env | cut -d= -f2)" \
     http://localhost:3000/sse
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ .env –≤ .gitignore
grep -n "^.env$" .gitignore
# –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å: 8:.env

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏ git
git log --all --full-history --source --all -- .env
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—É—Å—Ç–æ–π

# 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 401)
curl -i http://localhost:3000/sse
# HTTP/1.1 401 Unauthorized

# 4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 403)
curl -i -H "Authorization: Bearer wrong_token" http://localhost:3000/sse
# HTTP/1.1 403 Forbidden

# 5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º (–¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSE)
curl -i -H "Authorization: Bearer $MCP_AUTH_TOKEN" http://localhost:3000/sse
# HTTP/1.1 200 OK
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [RAILWAY.md](RAILWAY.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ deployment
- [.env.example](.env.example) - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [CHANGELOG.md](CHANGELOG.md) - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üÜò Troubleshooting

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω?

**–û—Ç–≤–µ—Ç:**
1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π: `openssl rand -base64 32`
2. –û–±–Ω–æ–≤–∏—Ç–µ –≤ Railway Variables
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å –Ω–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º
4. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤–æ –≤—Å–µ—Ö MCP –∫–ª–∏–µ–Ω—Ç–∞—Ö

**–í–æ–ø—Ä–æ—Å:** –ú–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–æ–∫–µ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º?

**–û—Ç–≤–µ—Ç:** –ù–µ—Ç. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ cloud deployment. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npm run start:stdio` (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω–∞).

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ?

**–û—Ç–≤–µ—Ç:**
```bash
# –ü—É–±–ª–∏—á–Ω—ã–µ endpoints –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
curl https://your-app.railway.app/health
# {"status":"healthy",...}

# –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints –¥–æ–ª–∂–Ω—ã —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
curl https://your-app.railway.app/sse
# {"error":"Unauthorized",...}

# –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
curl -H "Authorization: Bearer YOUR_TOKEN" https://your-app.railway.app/sse
# SSE connection established
```
